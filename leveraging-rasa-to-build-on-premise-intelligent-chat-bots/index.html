<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-fa783bea929f421f7a9e.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-68f7aee6b59dd86a2cd6.js" as="script"/><link rel="preload" href="/path---leveraging-rasa-to-build-on-premise-intelligent-chat-bots-a194b390757ee6112804.js" as="script"/><link rel="preload" href="/app-25c78bdc6e5d5576172b.js" as="script"/><link rel="preload" href="/commons-d27b2d4800120666d7b5.js" as="script"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Leveraging Rasa to build on-premise intelligent chat bots | Engineering at MindLink</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}</style><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}.footnote-backref{font-family:Cambria,Cochin,Georgia,Times,Times New Roman,serif}.footnotes p{display:inline}</style></head><body><div id="___gatsby"><div style="max-width:56.875rem;margin-left:auto;margin-right:auto;padding:2.4375rem 1.21875rem;" data-reactroot="" data-reactid="1" data-react-checksum="-58723718"><h3 style="margin-top:0;margin-bottom:-1.625rem;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;display:flex;align-items:center;" href="/" data-reactid="3"><span style="width:2em;height:2em;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPCEtLSBDcmVhdG9yOiBDb3JlbERSQVcgWDYgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMzAuNDIxMWluIiBoZWlnaHQ9IjI0LjgwMzJpbiIgdmVyc2lvbj0iMS4xIiBzdHlsZT0ic2hhcGUtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbjsgdGV4dC1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uOyBpbWFnZS1yZW5kZXJpbmc6b3B0aW1pemVRdWFsaXR5OyBmaWxsLXJ1bGU6ZXZlbm9kZDsgY2xpcC1ydWxlOmV2ZW5vZGQiCnZpZXdCb3g9IjAgMCAzMDQyMSAyNDgwMyIKIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KIDxkZWZzPgogIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgIDwhW0NEQVRBWwogICAgLmZpbDAge2ZpbGw6IzUxNTE1MTtmaWxsLXJ1bGU6bm9uemVyb30KICAgXV0+CiAgPC9zdHlsZT4KIDwvZGVmcz4KIDxnIGlkPSJfX3gwMDIzX0xheWVyX3gwMDIwXzEiPgogIDxtZXRhZGF0YSBpZD0iQ29yZWxDb3JwSURfMENvcmVsLUxheWVyIi8+CiAgPGcgaWQ9Il8yODc0MDYwMjQiPgogICA8cGF0aCBjbGFzcz0iZmlsMCIgZD0iTTIwNjUzIDE3MTE2YzQ3NSwtMjU3IDkxMywtNjM1IDEyODcsLTExMTIgNzQ2LC05NTMgMTIyNiwtMjMwMyAxMjI2LC0zODAzIDAsLTExMjYgLTI2OSwtMjE2NyAtNzIwLC0zMDE4IC00NTEsLTg1MyAtMTA4MCwtMTUxMiAtMTc5MywtMTg5NyAtNDc1LC0yNTcgLTk4NywtMzk1IC0xNTI2LC0zOTYgLTY1NiwxIC0xMjcyLDIwOCAtMTgzMiw1ODQgLTEyNCwxMjYgLTQ1NSw0NDcgLTk0Nyw3NzcgLTYxMCw0MDggLTE0NjgsODM5IC0yNDc4LDg0MyAtNTI0LDEgLTEwNTEsLTEyNSAtMTUyMCwtNDE4IC00NzEsLTI5MyAtODc0LC03NDEgLTExODksLTEzMzZsLTYzIC0xMTcgMCAtNTk4NWMyLC0yNDEgLTE0MywtNDQzIC0zNDUsLTUzNWwtMjg5IC01NyAtNTk4MCAwYy0xNjEsMCAtMzAzLDY1IC00MTAsMTczIC0xMDYsMTA4IC0xNzIsMjUzIC0xNzIsNDE5bDAgMTU2MDIgLTMxNjQgMzYxMSAzMTY0IDAgMCAyNzcwYzAsMTY2IDY1LDMxMiAxNzIsNDIwIDEwNiwxMDggMjQ5LDE3MSA0MTAsMTcxbDU5ODAgMCAyOTEgLTU2YzIwMCwtOTQgMzQ1LC0yOTUgMzQzLC01MzVsMCAtNjA0MSA2MyAtMTE2YzMxNiwtNTk4IDcxOCwtMTA0NyAxMTg5LC0xMzM4IDQ3MCwtMjkzIDk5NywtNDE5IDE1MjAsLTQxOSAxMDE0LDQgMTg3Myw0MzcgMjQ4Myw4NDYgNDg5LDMzMSA4MjEsNjUyIDk0NCw3NzkgNTU4LDM3NSAxMTc1LDU4MSAxODMwLDU4MSA1MzksMCAxMDUxLC0xMzcgMTUyNiwtMzk0eiIvPgogICA8cGF0aCBjbGFzcz0iZmlsMCIgZD0iTTI3MDA3IDM5MjJsMCAtMjY4NmMwLC0xNjYgLTY1LC0zMTIgLTE3MSwtNDE5IC0xMDgsLTEwOCAtMjUwLC0xNzIgLTQxMSwtMTczbC0xMzY4OSAwYy0xNTcsMiAtMjkzLDYxIC0zOTksMTYxIC0xMDAsOTYgLTE2NCwyMjQgLTE4MCwzNzFsMyAzOSAwIDU4NTVjNCw4MiAzNSwxNzEgMTI0LDI4NiA4OCwxMTEgMjM1LDIzNCA0MTQsMzM3IDM1NywyMTIgODQ4LDM0MiAxMTcyLDMzOCA2NzksNCAxMzU1LC0zMDcgMTg2MywtNjQ3IDUwNCwtMzM0IDgzNCwtNjgxIDgzOSwtNjg5bDQwIC00MyA0OCAtMzRjNzIyLC00OTkgMTU2OSwtNzkxIDI0NjcsLTc5MCA3MjMsLTEgMTQxNCwxODkgMjAzMCw1MjIgNjE4LDMzNSAxMTY0LDgxMiAxNjE4LDEzOTIgOTA3LDExNjEgMTQ0OSwyNzMyIDE0NTAsNDQ1OCAwLDEyOTMgLTMwNiwyNTAxIC04NDEsMzUxMyAtNTM1LDEwMTIgLTEzMDAsMTgzNCAtMjIyNywyMzM2IC02MTcsMzM0IC0xMzA4LDUyMyAtMjAzMCw1MjMgLTg5OSwxIC0xNzQ1LC0yOTIgLTI0NjcsLTc5MWwtNTAgLTM0IC00MCAtNDMgLTEgLTIgLTcgLTggLTM5IC00MGMtMzUsLTM1IC04OSwtODggLTE2MSwtMTUzIC0xNDEsLTEyNyAtMzQ5LC0zMDAgLTYwMywtNDcxIC01MDgsLTM0NSAtMTE5NiwtNjY3IC0xODg5LC02NjQgLTI4MCwwIC02MTAsNDQgLTg5NiwxNDEgLTI4OCw5NyAtNTE5LDI0NiAtNjUxLDQyMCAtODcsMTE0IC0xNDMsMjQxIC0xNjUsNDIwbDAgNTg5MiAtMiAyMSAtMiAyM2MxNSwxNDUgODAsMjczIDE3NywzNjggMTA0LDk4IDIzNiwxNTcgMzg5LDE1OWwxMzcwMyAwYzE2MSwwIDMwMywtNjMgNDExLC0xNzEgMTA2LC0xMDggMTcxLC0yNTQgMTcxLC00MjBsMCAtMTU3NTQgMzI0MSAtMzU0MyAtMzI0MSAweiIvPgogIDwvZz4KIDwvZz4KPC9zdmc+Cg==);background-size:contain;background-position:50%;background-repeat:no-repeat;" data-reactid="4"></span><!-- react-text: 5 -->Engineering at MindLink<!-- /react-text --></a></h3><div data-reactid="6"><!-- react-empty: 7 --><h1 data-reactid="8">Leveraging Rasa to build on-premise intelligent chat bots</h1><p style="font-size:0.87055rem;line-height:1.625rem;display:block;margin-top:-0.8125rem;margin-bottom:1.625rem;" data-reactid="9">May 18, 2018</p><div data-reactid="10"><p>In this post we will explain and demonstrate how to leverage <a href="https://rasa.com/">Rasa</a> to develop intelligent chatbots and securely deploy them on premise. Chatbots are one of the most direct ways to integrate with existing chat platforms. Whether you require a simple bot that replies to specific queries by fetching some information, or a more complex NPL-powered interactive agent, chatbots provide a way to integrate external services and functions into the collaboration experience of the chat platform users.</p>
<h2>Chatbot development since 2016</h2>
<p>Modern chatbot development for the most part leverages the capabilities of cloud APIs such as Microsoft <a href="https://azure.microsoft.com/en-gb/services/cognitive-services/language-understanding-intelligent-service/">LUIS</a> and Google <a href="https://dialogflow.com/">DialogFlow</a> that tend to abstract away from the developer most of the underlying complexities of natural language understanding and response selection tasks. This makes developing chatbot integration significantly easier than it would have been previously, where either more rudimentary approaches where necessary or intelligent chatbot development was significantly harder. This unfortunately means that this useful level of abstraction is unavailable to enterprise environments that have strict compliance or security requirements.</p>
<p>The use of cloud APIs that can read and store the information exchanged can lead to sensitive information being leaked to unintended parties, as well as not being as easlily traceable and archivable for compliance purposes. This means that many existing chatbot integrations that use these APIs are unsuitable for use on premise, and in-house development teams are prevented from using them as well. In order to achieve the same rich user experience talking to intelligent chatbots the in-house team has a lot more work to do, which may make these integrations unreasonably complex and time consuming to develop.</p>
<h2>Enter Rasa</h2>
<p>Rasa is the only natural language understanding and chatbot development API that is open source. The API itself can be deployed on premise in a controlled environment, with each message becoming easily traceable and subject to the same security constrains as any other message exchanged over the chat system. By using Rasa it becomes relatively easy to analyse natural language messages sent by chat users for intent categorisation and to build intelligent integrations with external systems.</p>
<p>We’re now going to take a look at a very simple bot built through Rasa and how to connect it to the MindLink API.</p>
<h2>The interesting bit</h2>
<p>For this example we’re going to use one of the tutorials for Rasa Core, and implement a simple group-listening bot connection to MindLink that will read all messages sent in a particular chatroom and reply with some information. It should be possible to resuse the connection code for other bots in the same manner as it is used here. We’ll implement the whole thing in Python as that is the simplest way to write bots against Rasa, but mutatis mutandis you should be able to re-implement the connection in your favorite language. Similarly to how the MindLink API works, you can setup the Rasa API as a REST service and use any language.</p>
<p>I’m going to assume you have Rasa Core installed locally, and you have your local Python environment setup (I’m assuming Python3, but the connection code is relatively straightforward and should not be too hard to port to Python2).</p>
<h3>The anathomy of an intelligent chat bot</h3>
<p>There are two independent pieces of a Rasa bot: an “interpreter” or intent-extractor and a dialogue model. The first is a mechanism to “parse” natural language input and extract the user intent, then feed this to the dialogue model together with raw natural language input. It is trained over a set of pre-classified data, and uses this training to classify new inputs. Similarly, the dialogue model is built from a set of response templates, actions and the same intents recognized by the interpreter. It is also trained over sample dialogues that represent possible conversations.</p>
<p>Both modular pieces are implemented in a “data-driven” fashion: to develop an intelligent chatbot a significant amount of training data is required for both the intent extractor and the dialogue model. Interactive training modes, where you basically have a dialogue with the interpreter/dialogue model and give it feedback allowing it to adjust its responses, are available out of the box. Both components are also independent from each other (you can use alternative dialogue models/intent extractor with them) and allow very fine tuning of the resulting trained models (if you know what you’re doing). Again, compelling chatbots are always the product of repeated training over a significant body of data. Depending on the application, there may be large data sets already publically available (e.g. healthcare etc).</p>
<h3>Great, but how do I actually put these together?</h3>
<p>Let’s focus on the intent extractor first. We’ll define a set of intents in a markdown file with some initial associated data: <code class="language-text">intents.md</code>. This is the file that basically defines how the intent extractor is going to interpret the input<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.</p>
<div class="gatsby-highlight">
      <pre class="language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">##</span> intent:greet</span>
<span class="token list punctuation">-</span> hey
<span class="token list punctuation">-</span> hello
<span class="token list punctuation">-</span> hi

<span class="token title important"><span class="token punctuation">##</span> intent:goodbye</span>
<span class="token list punctuation">-</span> bye
<span class="token list punctuation">-</span> goodbye

<span class="token title important"><span class="token punctuation">##</span> intent:mood_affirm</span>
<span class="token list punctuation">-</span> yes
<span class="token list punctuation">-</span> correct

<span class="token title important"><span class="token punctuation">##</span> intent:mood_deny</span>
<span class="token list punctuation">-</span> no
<span class="token list punctuation">-</span> nope

<span class="token title important"><span class="token punctuation">##</span> intent:mood_great</span>
<span class="token list punctuation">-</span> very good
<span class="token list punctuation">-</span> great
<span class="token list punctuation">-</span> amazing
<span class="token list punctuation">-</span> happy

<span class="token title important"><span class="token punctuation">##</span> intent:mood_unhappy</span>
<span class="token list punctuation">-</span> I am sad
<span class="token list punctuation">-</span> super sad
<span class="token list punctuation">-</span> sad
<span class="token list punctuation">-</span> very sad
<span class="token list punctuation">-</span> unhappy
<span class="token list punctuation">-</span> so saad
<span class="token list punctuation">-</span> so sad</code></pre>
      </div>
<p>Secondly, we’ll need two separate files for the dialogue model, one to define the things it recognizes and the actions it can take, and another with example conversations that exemplify when to take an action. First we define a domain: <code class="language-text">domain.yml</code>.</p>
<div class="gatsby-highlight">
      <pre class="language-yml"><code class="language-yml">intents:
  - greet
  - goodbye
  - mood_affirm
  - mood_deny
  - mood_great
  - mood_unhappy

actions:
- utter_greet
- utter_cheer_up
- utter_did_that_help
- utter_happy
- utter_goodbye

templates:
  utter_greet:
  - text: &quot;Hey! How are you?&quot;
    buttons:
    - title: &quot;great&quot;
      payload: &quot;great&quot;
    - title: &quot;super sad&quot;
      payload: &quot;super sad&quot;

  utter_cheer_up:
  - text: &quot;Here is something to cheer you up:&quot;
    image: &quot;https://i.imgur.com/nGF1K8f.jpg&quot;

  utter_did_that_help:
  - text: &quot;Did that help you?&quot;
  - text: &quot;Was that helpful?&quot;

  utter_happy:
  - text: &quot;Great carry on!&quot;

  utter_goodbye:
  - text: &quot;Bye&quot;</code></pre>
      </div>
<p>As you can see the domain also contains the response templates the bot can respond with.
Then we define sample conversations <code class="language-text">stories.md</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">##</span> happy path               </span><span class="token comment">&lt;!-- name of the story - just for debugging --></span>
<span class="token list punctuation">*</span> greet
  <span class="token list punctuation">-</span> utter_greet
<span class="token list punctuation">*</span> mood_great               <span class="token comment">&lt;!-- user utterance, in format _intent[entities] --></span>
  <span class="token list punctuation">-</span> utter_happy

<span class="token title important"><span class="token punctuation">##</span> sad path 1               </span><span class="token comment">&lt;!-- this is already the start of the next story --></span>
<span class="token list punctuation">*</span> greet
  <span class="token list punctuation">-</span> utter_greet             <span class="token comment">&lt;!-- action of the bot to execute --></span>
<span class="token list punctuation">*</span> mood_unhappy
  <span class="token list punctuation">-</span> utter<span class="token italic"><span class="token punctuation">_</span>cheer<span class="token punctuation">_</span></span>up
  <span class="token list punctuation">-</span> utter<span class="token italic"><span class="token punctuation">_</span>did<span class="token punctuation">_</span></span>that_help
<span class="token list punctuation">*</span> mood_affirm
  <span class="token list punctuation">-</span> utter_happy

<span class="token title important"><span class="token punctuation">##</span> sad path 2</span>
<span class="token list punctuation">*</span> greet
  <span class="token list punctuation">-</span> utter_greet
<span class="token list punctuation">*</span> mood_unhappy
  <span class="token list punctuation">-</span> utter<span class="token italic"><span class="token punctuation">_</span>cheer<span class="token punctuation">_</span></span>up
  <span class="token list punctuation">-</span> utter<span class="token italic"><span class="token punctuation">_</span>did<span class="token punctuation">_</span></span>that_help
<span class="token list punctuation">*</span> mood_deny
  <span class="token list punctuation">-</span> utter_goodbye

<span class="token title important"><span class="token punctuation">##</span> say goodbye</span>
<span class="token list punctuation">*</span> goodbye
  <span class="token list punctuation">-</span> utter_goodbye

<span class="token title important"><span class="token punctuation">##</span> no greeting happy</span>
<span class="token list punctuation">*</span> mood_great
  <span class="token list punctuation">-</span> utter_happy

<span class="token title important"><span class="token punctuation">##</span> no greeting sad</span>
<span class="token list punctuation">*</span> mood_unhappy
  <span class="token list punctuation">-</span> utter<span class="token italic"><span class="token punctuation">_</span>cheer<span class="token punctuation">_</span></span>up
  <span class="token list punctuation">-</span> utter<span class="token italic"><span class="token punctuation">_</span>did<span class="token punctuation">_</span></span>that_help</code></pre>
      </div>
<p>Each story is an independent example of a complete conversation. As you can see, the dialogue model doesn’t understand natural language, it undertstands intents. So the raw input needs to be piped through the intent extractor and then into the dialogue model.</p>
<p>Now that we’ve defined our data in files we need to train (“compile” if you like) the actual models from the data. You can use config files or pass additional parameters to the python scripts:</p>
<p>nlu_config.json</p>
<div class="gatsby-highlight">
      <pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"pipeline"</span><span class="token operator">:</span> <span class="token string">"spacy_sklearn"</span><span class="token punctuation">,</span>
  <span class="token property">"path"</span> <span class="token operator">:</span> <span class="token string">"./models/interpreter"</span><span class="token punctuation">,</span>
  <span class="token property">"data"</span> <span class="token operator">:</span> <span class="token string">"./data/intents.md"</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>Training the intent extractor:</p>
<p><code class="language-text">python -m rasa_nlu.train -c nlu_config.json --fixed_model_name current</code></p>
<p>Training the dialogue model:</p>
<p><code class="language-text">python -m rasa_core.train -s data/stories.md -d domain.yml -o models/dialogue --epochs 300</code></p>
<p>Hopefully, you’ve got a working bot at this point. You can talk to it over the command line<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>:</p>
<p><code class="language-text">python -m rasa_core.run -d models/dialogue -u models/interpeter/default/current</code></p>
<p>Now we are ready to wire this up to the MindLink API.</p>
<h3>A simple Python MindLink API connection</h3>
<p>We’re going to define a simple API connection class. This class will be responsible for interfacing with MindLink, relaying messages received to a consumer (which will be the bot in our example) and allowing for sending messages.</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ApiConnection</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">authenticate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        requestUrl <span class="token operator">=</span> <span class="token string">'{}/Authentication/V1/Tokens'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>host<span class="token punctuation">)</span>

        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>
            requestUrl<span class="token punctuation">,</span>
            json <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">'Username'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
                <span class="token string">'Password'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>password<span class="token punctuation">,</span>
                <span class="token string">'AgentId'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>agent
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            headers <span class="token operator">=</span> self<span class="token punctuation">.</span>RequestHeaders<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>token <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> self<span class="token punctuation">.</span>token

    <span class="token keyword">def</span> <span class="token function">getMessages</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> channelId<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">:</span>
        requestUrl <span class="token operator">=</span> <span class="token string">'{}/Collaboration/V1/Channels/{}/Messages'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>host<span class="token punctuation">,</span> channelId<span class="token punctuation">)</span>

        parameters <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'take'</span><span class="token punctuation">:</span> count<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>

        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
            requestUrl<span class="token punctuation">,</span>
            params <span class="token operator">=</span> parameters<span class="token punctuation">,</span>
            headers <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">'Accept'</span> <span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
                <span class="token string">'Authorization'</span><span class="token punctuation">:</span> <span class="token string">'FCF {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span>

        <span class="token keyword">return</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> channelId<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">:</span>
        requestUrl <span class="token operator">=</span> <span class="token string">'{}/Collaboration/V1/Channels/{}/Messages'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>host<span class="token punctuation">,</span> channelId<span class="token punctuation">)</span>

        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>
            requestUrl<span class="token punctuation">,</span>
            json <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">'Text'</span><span class="token punctuation">:</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">'IsAlert'</span><span class="token punctuation">:</span> <span class="token boolean">False</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            headers <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">'Accept'</span> <span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
                <span class="token string">'Authorization'</span><span class="token punctuation">:</span> <span class="token string">'FCF {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span>

        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Failed to send message to channel'</span><span class="token punctuation">,</span> channelId<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">_getEvents</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> channelId<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>running <span class="token operator">=</span> <span class="token boolean">True</span>

        <span class="token keyword">while</span> self<span class="token punctuation">.</span>running<span class="token punctuation">:</span>
            requestUrl <span class="token operator">=</span> <span class="token string">'{}/Collaboration/V1/Events'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>host<span class="token punctuation">)</span>

            parameters <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">'last-event'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>last_event<span class="token punctuation">,</span>
                <span class="token string">'types'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'channels'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>channelId<span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'regex'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token string">'origins'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'remote'</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>

            response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
                requestUrl<span class="token punctuation">,</span>
                params <span class="token operator">=</span> parameters<span class="token punctuation">,</span>
                headers <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token string">'Accept'</span> <span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
                    <span class="token string">'Authorization'</span><span class="token punctuation">:</span> <span class="token string">'FCF {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>

            <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Failed to get new messages from channel'</span><span class="token punctuation">,</span> channelId<span class="token punctuation">)</span>
                <span class="token keyword">continue</span>

            <span class="token keyword">for</span> event <span class="token keyword">in</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                eventId <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'EventId'</span><span class="token punctuation">]</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>eventId <span class="token operator">></span> self<span class="token punctuation">.</span>last_event<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span>last_event <span class="token operator">=</span> eventId

                <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">[</span><span class="token string">'Sender'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> self<span class="token punctuation">.</span>localUserId<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    message <span class="token operator">=</span> Message<span class="token punctuation">(</span>event<span class="token punctuation">[</span><span class="token string">'Sender'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> event<span class="token punctuation">[</span><span class="token string">'Content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> event<span class="token punctuation">[</span><span class="token string">'Time'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> event<span class="token punctuation">[</span><span class="token string">'ChannelId'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    callback<span class="token punctuation">(</span>message<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">startStreaming</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> channelId<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>requestThread <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>self<span class="token punctuation">.</span>_getEvents<span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token punctuation">(</span>channelId<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>requestThread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">stopStreaming</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>running <span class="token operator">=</span> <span class="token boolean">False</span></code></pre>
      </div>
<h4>What’s all this?</h4>
<p>Let’s breakdown the methods on by one. First off, the <code class="language-text">authenticate</code> should be relatively self-explanatory, it makes a request to the authentication endpoint of the MindLink API in order to log on an agent. It’s going to keep a hold of the received token and send it back with each subsequent request (this needs to be renewed if it expires).</p>
<p>The <code class="language-text">getMessages</code> method is going to read a certain number of messages from the messages endpoint for a specific channel. Similarly with the <code class="language-text">sendMessage</code> method.</p>
<p>Then we get to the more complicated bits: <code class="language-text">_getEvents</code> is a perpetually running method that repeatedly makes get requests to the events endpoint of the API, fetching new events for a given channel ID. This method is invoked from the public <code class="language-text">startStreaming</code> method on a separate thread, and will keep that thread running forever until the <code class="language-text">stopStreaming</code> method is invoked. As you can see, what happens with each event received is not defined by this class, but needs to be forwarded by the caller in the form of a callback.</p>
<p>Now that we’ve covered the core connection code, we’ll build a basic example of how to use it.</p>
<h3>MindLink + Rasa</h3>
<p>Let’s make a python script entry point file, this is the actual sauce that feeds the message content to the bot and posts back a respone:</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">handleMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> agent<span class="token punctuation">.</span>handle_message<span class="token punctuation">(</span>message<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
    connection<span class="token punctuation">.</span>sendMessage<span class="token punctuation">(</span>channelId<span class="token punctuation">,</span> response<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Loading Rasa agent (this may take a while).'</span><span class="token punctuation">)</span>
    agent <span class="token operator">=</span> Agent<span class="token punctuation">.</span>load<span class="token punctuation">(</span>dialogue_model<span class="token punctuation">,</span> interpreter_model<span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Creating connection to MindLink.'</span><span class="token punctuation">)</span>
    connection <span class="token operator">=</span> ApiConnection<span class="token punctuation">(</span>
        u<span class="token string">'http://localhost:8081'</span><span class="token punctuation">,</span>
        u<span class="token string">'userdomain\\moodbot'</span><span class="token punctuation">,</span>
        u<span class="token string">'some password'</span><span class="token punctuation">,</span>
        u<span class="token string">'moodbot_agent'</span><span class="token punctuation">,</span>
        u<span class="token string">'contact:moodbot@userdomain.local'</span><span class="token punctuation">)</span>

    connection<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span><span class="token punctuation">)</span>

    connection<span class="token punctuation">.</span>startStreaming<span class="token punctuation">(</span>
        channelId<span class="token punctuation">,</span>
        <span class="token keyword">lambda</span> _<span class="token punctuation">,</span> message<span class="token punctuation">:</span> handleMessage<span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'Type anything to stop.\r\n'</span><span class="token punctuation">)</span>
    connection<span class="token punctuation">.</span>stopStreaming<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>This will “start” the API connection on a given channel, with some preconfigured agent settings and a given channel ID (in a real application these may be passed as command line arguments, read from file etc). For each message received in the channel, this will be forwarded to the Rasa bot and the response will be sent back to the channel.</p>
<h2>Conclusion</h2>
<p>We covered a fair amount of ground in this post, explaining why Rasa is interesting for enterprise development, touching on core Rasa bot development concepts and demonstrating a basic way to wire everything up the MindLink API.</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>This is a condensed version of <a href="https://core.rasa.com/tutorial_basics.html">this short tutorial</a>.</p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>Note that we’re using extremely limited sample data here, the classification and response selection performance is almost certainly going to be disappointing. A lot of data is necessary before satisfactory performance is achieved.</p>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
</ol>
</div></div><hr style="margin-bottom:1.625rem;" data-reactid="11"/><div style="display:flex;margin-bottom:4.0625rem;align-items:flex-start;" data-reactid="12"><div class=" gatsby-image-outer-wrapper" style="position:relative;" data-reactid="13"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:60px;height:60px;margin-right:0.8125rem;margin-bottom:0;vertical-align:top;flex:none;" data-reactid="14"><img alt="Niccolo Terreri" src="data:image/svg+xml,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; width=&#x27;60&#x27; height=&#x27;60&#x27; viewBox=&#x27;0 0 60 60&#x27; version=&#x27;1&#x27;%3E%3Crect width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; fill=&#x27;%23f6f2f8&#x27;/%3E%3Cpath d=&#x27;M24 4l-1 4-1-3-1-3H0v6c0 3 0 5 1 4 1-2 7-3 7-1H7l-3 1-2 1v3l-1 3-1 12v12l5-1c4 0 4 0 4 2v2h1l2-3h1c0 3 15 2 16-2l2-1 1 1-1 6-1 4 1-3 2-6c0-3 0-3 1-1s4 5 9 7c7 3 8 3 9-1 2-3 0-4-8-4-2 0-3 0-2-1l1-1h3c3-1 3-2 3-4 0-3-1-4-7-4s-7-1-7-3l1-3 1 2c0 3 0 3 3 2 3-2 2-9-2-9l-1-1 6-1c7-1 7-2 4-6-1-2-3-2-6-2l-7-1 3-1c3 0 3 0 3-4-1-4-1-4-6-4l-7-1c-1 0-2 0-3 3m19-2v8l1-1h7c3 1 6-3 5-5s-9-4-13-2m16 1v5c1 2 1-2 1-5-1-2-1-2-1 0m-6 9c-3 2 1 8 5 8 2 0 2-1 2-4s0-4-2-4l-3-1-2 1m-36 1l-1 2-1 1-1 2c-1 1 0 2 2 2 4 0 5 1 5 3s-7 3-7 1h-1v3l1 2c-2 2 0 5 2 4h2l2-2c1-2 1-2 1 0s1 3 3 0h1l2 2 2 2v3l1-3 2-2 1-5c0-4-1-6-2-3-1 2-6 2-7 1l1-3c0-2 6-3 7-1h1l-1-2v-1c3 0 1-2-5-4-6-3-8-3-10-2m28 11c-2 1-1 4 1 5 1 2 6 2 8 1l3-1c2 0 2-1 2-3 0-1 0-2-1-1l-1-1c1-1-11-2-12 0m7 10l-1 3 1 3 5 1c3 0 3 0 3-4 0-3-1-4-3-4l-5 1m-36 2c0 3 10 4 11 1l-1-1H16m38 11c0 3 1 4 3 4 3 0 3 0 3-3 0-4 0-4-3-4s-3 0-3 3m0 7l2 2 1 2 2 2 1-3c0-4 0-4-3-4l-3 1&#x27; fill=&#x27;%23e0d6eb&#x27; fill-rule=&#x27;evenodd&#x27;/%3E%3C/svg%3E" style="position:absolute;top:0;left:0;transition:opacity 0.5s;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:0.25s;border-radius:100%;" data-reactid="15"/><noscript data-reactid="16"><img width="60" height="60" src="/static/niccolo-26a188bd01f250cfcc08e18338c308e7-454f9.jpg" srcset="/static/niccolo-26a188bd01f250cfcc08e18338c308e7-454f9.jpg 1x,
/static/niccolo-26a188bd01f250cfcc08e18338c308e7-f8c68.jpg 1.5x,
/static/niccolo-26a188bd01f250cfcc08e18338c308e7-d364e.jpg 2x,
/static/niccolo-26a188bd01f250cfcc08e18338c308e7-e5a4b.jpg 3x" alt="Niccolo Terreri" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></noscript></div></div><div data-reactid="17"><p data-reactid="18"><!-- react-text: 19 -->Written by <!-- /react-text --><strong data-reactid="20">Niccolo Terreri</strong><!-- react-text: 21 -->.<!-- /react-text --></p><p style="color:#888888;" data-reactid="22">Niccolo has a cat named Nosey who is true to her name. www.niccoloterreri.com</p></div></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0;" data-reactid="23"><li data-reactid="24"><a rel="prev" href="/why-draftjs-doesnt-work-on-android" data-reactid="25"><!-- react-text: 26 -->← <!-- /react-text --><!-- react-text: 27 -->Why DraftJS doesn&#x27;t work on Android<!-- /react-text --></a></li><li data-reactid="28"><a rel="next" href="/custom-content-in-a-skype-for-business-conversation" data-reactid="29"><!-- react-text: 30 -->Custom content in a Skype for Business conversation<!-- /react-text --><!-- react-text: 31 --> →<!-- /react-text --></a></li></ul><hr style="margin-bottom:1.625rem;" data-reactid="32"/><div class="utterances-placeholder" data-reactid="33"></div></div><span style="display:block;clear:both;" data-reactid="34"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-25c78bdc6e5d5576172b.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-68f7aee6b59dd86a2cd6.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","35783957827783":"component---src-pages-index-js-1bc116d76406ca9e28a9.js","60335399758886":"path----93acfddfa4afcd4dbca4.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","19834296486214":"path---automate-your-memory-profiling-now-15302fd516d388fa253e.js","125210007625489":"path---hybrid-electron-application-deployment-in-the-enterprise-2e2e43c2843eaeed9acf.js","177698804942370":"path---the-symphony-london-hackathon-2018-55ccd2f6ae1bf77baa50.js","246421931260619":"path---visualising-skype-for-business-persistent-chat-data-3f22fe6a3ff5ab6ac526.js","78213438093281":"path---getting-started-with-python-and-the-mindlink-api-da363fcaf10d159728c6.js","210078362639055":"path---parallelizing-our-ci-tests-8b248f85db3cf194020e.js","175624018417515":"path---mixin-that-memory-leak-3ca758ad07028cff78d0.js","276876481256213":"path---improving-our-ci-tests-2d7e076fb8d77e713893.js","470145679688":"path---end-to-end-encryption-with-the-signal-protocol-aee928a050b72560df2c.js","3348540548791":"path---creating-a-private-ethereum-blockchain-and-using-it-as-a-model-09e64e0a368195b557bf.js","158181132903248":"path---custom-content-in-a-skype-for-business-conversation-623d929d52365a5dfb5f.js","10959833468015":"path---leveraging-rasa-to-build-on-premise-intelligent-chat-bots-a194b390757ee6112804.js","128816527069367":"path---why-draftjs-doesnt-work-on-android-6e9bc61c1e1cd0c8f3bf.js","242332654075282":"path---publishing-to-github-pages-from-tfs-26e56d3b26f84fb2c26b.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-b74920e8114a568d51fd.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-fa783bea929f421f7a9e.js"}/*]]>*/</script><script>
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto');
      }
      </script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-d27b2d4800120666d7b5.js","/app-25c78bdc6e5d5576172b.js","/path---leveraging-rasa-to-build-on-premise-intelligent-chat-bots-a194b390757ee6112804.js","/component---src-templates-blog-post-js-68f7aee6b59dd86a2cd6.js","/component---src-layouts-index-js-fa783bea929f421f7a9e.js"])/*]]>*/</script></body></html>