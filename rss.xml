<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Engineering at MindLink]]></title><description><![CDATA[Insights and musings from the MindLink software engineers]]></description><link>https://engineering.mindlinksoft.com</link><generator>RSS for Node</generator><lastBuildDate>Wed, 20 Jun 2018 17:33:20 GMT</lastBuildDate><item><title><![CDATA[End-To-End Encryption with the Signal Protocol]]></title><description><![CDATA[What is the Signal Protocol? The Signal Protocol (formerly TextSecure Protocol) defines a cryptographic encryption protocol for secure end…]]></description><link>https://engineering.mindlinksoft.comend-to-end-encryption-with-the-signal-protocol</link><guid isPermaLink="false">https://engineering.mindlinksoft.comend-to-end-encryption-with-the-signal-protocol</guid><pubDate>Wed, 20 Jun 2018 10:15:00 GMT</pubDate><content:encoded>&lt;h2&gt;What is the Signal Protocol?&lt;/h2&gt;
&lt;p&gt;The Signal Protocol (formerly TextSecure Protocol) defines a cryptographic encryption protocol for secure end-to-end encryption (E2EE). It was created by Open Whisper Systems for use in their secure messaging app TextSecure but has since been released, open-source, to the wider community. It has become hugely popular amongst consumer applications and has earned its name as the defacto standard for securing messaging and voice and video communications. Some of the largest adopters include Google Allo, Facebook Messenger and WhatsApp, but more and more organizations are embracing E2EE everyday as concerns surrounding privacy, security and surveillance increasingly find themselves center-stage in the public eye.&lt;/p&gt;
&lt;p&gt;In simple terms, E2EE allows us to ensure our data is only visibile to its intended recipient; the data is encrypted on the client on the user’s own device before it is even sent over the wire. This means that all the infrastructure in the middle (routing, messaging servers, databases etc.) will never get to see your data in its raw form! And this is great — it means we can completely eliminate the element of trust between client and server so users no longer have to worry about whether their data is truly safe in the hands of their messaging provider. More importantly though, it means that any third party trying to intercept a user’s communications in transit will surely fail!&lt;/p&gt;
&lt;h2&gt;Give me an example.&lt;/h2&gt;
&lt;p&gt;As an example let’s say that user A wants to send a message to user B over MindLink — here is how a typical Signal Protocol exchange goes:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;1) User A and User B log on for the first time and generate new asymmetrics key-pairs. They publish their public keys to a server.
2) User A downloads user B&amp;#39;s keys from the server.
3) He creates a new secure messaging session.
4) Then encrypts the message.
5) Sends the message over MindLink.
6) User B receives the messages and starts a matching secure messaging session, decrypting the message.&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Ok, now let’s unpack this a little…&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;**1)** When logging in to MindLink for the first time, each user generates serveral sets of keys: A long-term identity key-pair, a medium-term signed prekey pair and several emphemeral keys. The public keys of these pairs are packaged up into whats known as a prekey bundle. This bundle is then sent to a Key Exchange server for storage and dissemintation.

**2)** User A decides to send a message to user B for the first time. User A starts by requesting user B&amp;#39;s prekey bundle from the Key Exchange.

**3)** With this, user A builds a new session based on both their keys and user B&amp;#39;s keys in what is referred to as the **Extended Triple Diffie-Hellman (X3DH) key agreement protocol**. 

Note: This sounds like a mouthful, and while I likely won&amp;#39;t do it justice here you can find very detailed information about X3DH and indeed the other defining features of the Signal Protocol at the official website, [https://signal.org/docs/](https://signal.org/docs/).

The Diffie-Hellman (or more specifically the **elliptic-curve Diffie-Hellman**) protocol describes a novel way of deriving a shared secret amongst two parties over an insecure channel. Using some clever mathematics it can be shown that two users sharing some initial public data and some hidden secret data can exchange a sequence of transformations based on that data and arrive at entirely the same conclusion - the shared secret - without anyone who might be observing this exchange being able to do the same! This shared secret then becomes the starting point of an encrypted session between the two users.

**4)** User A encypts a message using their new session.

This relies on Signal Protocol&amp;#39;s famous [Double Ratchet algorithm](https://signal.org/docs/specifications/doubleratchet/) which combines two types of ratchet - a symmetric-key ratchet and a Diffie-Hellman ratchet - to acheive a means of deriving a series of unique message encryption keys that are totally dissociated from any previous or future encryption keys. This means that if an attacker were to compromise one the Double Ratchet keys, they could not then go on to decrypt any other messages. It is this feature of dynamically evolving cryptography that affords Signal its uber-secure reputation.

The **symmetric ratchet** uses the shared secret key from the X3DH protocol in combination with user B&amp;#39;s ephemeral keys to generate two symmetric keys: a root key (a secret only the users A and B can posses) and a sending chain key. These keys are passed through a **key derivation function (KDF)** to derive unique message keys for each message that is sent. When user A sends a message to user B, user A will advance their sending key chain by one step, generating a new sending chain key and a message encryption key, and on receipt of this message user B will advance their receiving key chain one step and generate the corresponding message decryption key. This is good but if an attacker were to steal user B&amp;#39;s sending and receiving chain key they could potentially calculate every future message key and thus every future message. This is where the other half of the **Double Ratchet** comes in...

The **Diffie-Hellman ratchet** is &amp;quot;interleaved&amp;quot; with the symmetric ratchet and the output periodically initialises a new set of sending and receiving chain keys and a brand new root key. This means the attacker&amp;#39;s stolen keys are useless after only a single two-way message exchange (the &amp;quot;period&amp;quot; of the DH ratchet)!

This all sounds quite complicated... and that&amp;#39;s because it is! I would encourage anyone who&amp;#39;s really interested to go away and read and this very technical, very in-depth [analysis of Signal](https://eprint.iacr.org/2016/1013.pdf).

The message itself contains the encrypted ciphertext payload along with the outputs of the DH ratchet at each stage and some additional information for the recipient to advance their receiving key chain correctly. But this is also a special case - being the first message sent in a new session. User A also straps their prekey bundle to the encrypted message so user B can derive a complementary session.

**5)** User A sends the encrypted payload over the wire!

**6)** User B receives the encrypted message payload. They recognise that they don&amp;#39;t have a matching session for the message, but they DO realise that there&amp;#39;s a prekey bundle attached to the message that they can establish one with. After going through the same steps as user A in #3 and #4 user B ends up with the decrypted plaintext message.&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Wrapping it up&lt;/h2&gt;
&lt;p&gt;So that’s it! There are plenty of details left out here but this should hopefully offers a decent high-level overview of the kind of flow and processes you can expect to see in a typicaly Signal Protocol offering.&lt;/p&gt;
&lt;p&gt;For further interest regarding implementation of the protocol, I’ve created a simple browser-based demonstration using the Javascript Signal APIs &lt;a href=&quot;https://github.com/Jamie-Matthews/Signal-Protocol-Demo&quot;&gt;which you can find on GitHub&lt;/a&gt;. The demo creates two “users” and runs through the steps outlined in this post to exchange some messages between them. Enjoy!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Custom content in a Skype for Business conversation]]></title><description><![CDATA[At MindLink we like to take current trends in messaging and see if we can get more out of Skype for Business (SfB) by supporting them. This…]]></description><link>https://engineering.mindlinksoft.comcustom-content-in-a-skype-for-business-conversation</link><guid isPermaLink="false">https://engineering.mindlinksoft.comcustom-content-in-a-skype-for-business-conversation</guid><pubDate>Mon, 21 May 2018 10:15:00 GMT</pubDate><content:encoded>&lt;p&gt;At MindLink we like to take current trends in messaging and see if we can get more out of Skype for Business (SfB) by supporting them. This week with our intern Daniel I’ve been investigating how to display rich custom content i.e. cards, in channels while having fallback content for other clients that don’t understand the rich content.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;We have made it possible to bring rich content cards as seen in many popular trendy chat platforms to existing Skype for Business deployments, further extending the value of SfB!&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Getting custom data inside a SfB message&lt;/h2&gt;
&lt;p&gt;Skype for Business channels are known as Persistent Chat groups in SfB speak. They support sending Rich Text Format (RTF), but the native clients will reject unrecognised/malformed RTF and display a very specific subset of the RTF content. This is also true for 1-1 conversations.&lt;/p&gt;
&lt;p&gt;Fortunately RTF is pretty well documented, what we need is some way to send RTF that can have some non-RTF content and a fallback if that content isn’t supported.&lt;/p&gt;
&lt;p&gt;Enter the &lt;code class=&quot;language-text&quot;&gt;\object&lt;/code&gt; block! The RTF specification describes this as a block for representing OLE objects, where the object is a base64 encoded OLE stream and there are other blocks for defining the type and importantly the RTF “result” should the object not be supported. See the &lt;a href=&quot;http://www.biblioscape.com/rtf15_spec.htm#Heading50&quot;&gt;RTF Specification&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;By using our framework we were able to insert a test object to see how the SfB client reacts to such a definition. As expected and conforming to the RTF specification the client renders only the RTF result of the object. The format we used to achieve this within an RTF message was:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{\object \objemb {*\objclass MindLinkCard} {*\objdata &amp;lt;data&amp;gt;} {\result &amp;lt;fallback&amp;gt;}}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Using this as a starting point we defined a common representation for structured JSON data that we would encode as the object data (replacing &lt;code class=&quot;language-text&quot;&gt;&amp;lt;data&amp;gt;&lt;/code&gt; above). We then extended our core application to allow the sending of a restricted set of rich content cards, ensuring that the fallback RTF result is populated with a textual description of the content, replacing &lt;code class=&quot;language-text&quot;&gt;&amp;lt;fallback&amp;gt;&lt;/code&gt; above e.g. inserting a support ticket might render “see ticket &lt;a href=&quot;https://support.company.com/ticket/AT-123%22&quot;&gt;https://support.company.com/ticket/AT-123”&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We then enhanced our client to be able to send these rich content cards and display rich content in the message history instead of the fallback text!&lt;/p&gt;
&lt;p&gt;What’s more is that we made this extensible, so it’s possible to load client extensions to send other rich content cards! This opens up the possibility for more intuitive line of business workflows right within your conversations.&lt;/p&gt;
&lt;p&gt;Expect to see us leverage this new extensibility in sample integrations with other line-of-business applications.&lt;/p&gt;
&lt;h2&gt;Example use case - Giphy&lt;/h2&gt;
&lt;p&gt;While we work on more advanced integrations, here’s an example popular integration with &lt;a href=&quot;https://www.giphy.com&quot;&gt;Giphy&lt;/a&gt; that is a very simple showcase of what these new capabilities can provide. Imagine linking this into line-of-business applications that show dynamic data or allow actions to be taken with the click of a button from right within the conversation.&lt;/p&gt;
&lt;p&gt;Our work-in-progress extensibility API allows an extension to load a popup for composing a message card, as shown below.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/popup-a6c66713b004436b5ee92bfae218fe0b-0de24.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 68.31896551724138%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB2IMUiY2S/wD/xAAaEAEAAgMBAAAAAAAAAAAAAAACAQMAEBIT/9oACAEBAAEFAuBjisH1qnVtfZIkx//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABsQAAIBBQAAAAAAAAAAAAAAAAARARASMjOh/9oACAEBAAY/AsYHZBq5RNCZ/8QAHBAAAwABBQAAAAAAAAAAAAAAAAERITFhceHx/9oACAEBAAE/IfLKDHhC6ESjFSyulElMVsf/2gAMAwEAAgADAAAAEPAv/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQMBAT8QR//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQEAAwADAAAAAAAAAAAAAAERACFBMcHh/9oACAEBAAE/EJO3runLReoHL3DFNTWkPF94uEmDyDY4GXQhfrP/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Composing Popup&quot;
        title=&quot;&quot;
        src=&quot;/static/popup-a6c66713b004436b5ee92bfae218fe0b-f8fb9.jpg&quot;
        srcset=&quot;/static/popup-a6c66713b004436b5ee92bfae218fe0b-e8976.jpg 148w,
/static/popup-a6c66713b004436b5ee92bfae218fe0b-63df2.jpg 295w,
/static/popup-a6c66713b004436b5ee92bfae218fe0b-f8fb9.jpg 590w,
/static/popup-a6c66713b004436b5ee92bfae218fe0b-85e3d.jpg 885w,
/static/popup-a6c66713b004436b5ee92bfae218fe0b-0de24.jpg 928w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;The extension can insert any number of pre-defined card message parts, below you can see the Giphy extension insert an image card.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/composing-c7fd938a1177e779b5eab47b1e87d16e-99062.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 24.54642475987193%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyQoD//xAAWEAEBAQAAAAAAAAAAAAAAAAAAATH/2gAIAQEAAQUCmK//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAADAQEAAAAAAAAAAAAAAAAAESFRMf/aAAgBAQABPyHSkwV8P//aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhQVFx/9oACAEBAAE/EDQMvWp4xAhpP//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Composing&quot;
        title=&quot;&quot;
        src=&quot;/static/composing-c7fd938a1177e779b5eab47b1e87d16e-f8fb9.jpg&quot;
        srcset=&quot;/static/composing-c7fd938a1177e779b5eab47b1e87d16e-e8976.jpg 148w,
/static/composing-c7fd938a1177e779b5eab47b1e87d16e-63df2.jpg 295w,
/static/composing-c7fd938a1177e779b5eab47b1e87d16e-f8fb9.jpg 590w,
/static/composing-c7fd938a1177e779b5eab47b1e87d16e-85e3d.jpg 885w,
/static/composing-c7fd938a1177e779b5eab47b1e87d16e-99062.jpg 937w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;When the message is sent the MindLink client will then display the card in full detail:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/inline-7cdee083e5832a3299a12c77916dbea4-4e39d.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 67.95698924731182%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYF2SC4f/EABkQAAMBAQEAAAAAAAAAAAAAAAACAwETEv/aAAgBAQABBQLmh4Q5oVkz1lmpPT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAACAwADAAAAAAAAAAAAAAABEQACMhASkf/aAAgBAQAGPwLA8mKzInYJJIwVsWRx/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERIUHR8f/aAAgBAQABPyGGC8gv1iY/nhk7W1jV4f/aAAwDAQACAAMAAAAQQM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEAAwABBQAAAAAAAAAAAAABABEhMWFxgZHR/9oACAEBAAE/EMA9KY6njGs1djGpqEZtreHWYW0Hh35HsSFT/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Inline conversation&quot;
        title=&quot;&quot;
        src=&quot;/static/inline-7cdee083e5832a3299a12c77916dbea4-f8fb9.jpg&quot;
        srcset=&quot;/static/inline-7cdee083e5832a3299a12c77916dbea4-e8976.jpg 148w,
/static/inline-7cdee083e5832a3299a12c77916dbea4-63df2.jpg 295w,
/static/inline-7cdee083e5832a3299a12c77916dbea4-f8fb9.jpg 590w,
/static/inline-7cdee083e5832a3299a12c77916dbea4-85e3d.jpg 885w,
/static/inline-7cdee083e5832a3299a12c77916dbea4-4e39d.jpg 930w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;When the card is rendered in a Skype for Business client it shows the fallback text described by the extension. For Giphy integration that’s simply the link to the GIF, for other integrations that may be a combination of text and links.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/sfb-06f330df972c5f0a7dcf7473dfde6534-1f48b.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 479px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 119.6242171189979%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAYABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAfXzuVn2E3YJQP8A/8QAGBAAAwEBAAAAAAAAAAAAAAAAAQIREBL/2gAIAQEAAQUCa2HGWnjQbn//xAAWEQEBAQAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BLp//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAXEAADAQAAAAAAAAAAAAAAAAAAITDh/9oACAEBAAY/AkbD/8QAHRABAAEDBQAAAAAAAAAAAAAAAQAQETEhgZHR8f/aAAgBAQABPyEruhd1hnhwscvFRwHcp//aAAwDAQACAAMAAAAQzPi+/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/EE2KAT//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QIGLP/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMSFBYf/aAAgBAQABPxDqCFfEOVKRqVCWcqCBxhq4oC1MEUD0Ngj5P//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Skype for Business fallback&quot;
        title=&quot;&quot;
        src=&quot;/static/sfb-06f330df972c5f0a7dcf7473dfde6534-1f48b.jpg&quot;
        srcset=&quot;/static/sfb-06f330df972c5f0a7dcf7473dfde6534-e4839.jpg 148w,
/static/sfb-06f330df972c5f0a7dcf7473dfde6534-9f8fc.jpg 295w,
/static/sfb-06f330df972c5f0a7dcf7473dfde6534-1f48b.jpg 479w&quot;
        sizes=&quot;(max-width: 479px) 100vw, 479px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;We are very excited to be developing this new set of features for our customers, enabling next generation functionality without requiring a whole new platform!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Why DraftJS doesn't work on Android]]></title><description><![CDATA[DraftJS  is a popular open source rich text editing library for React maintained by Facebook. It allows developers to decorate input text as…]]></description><link>https://engineering.mindlinksoft.comwhy-draftjs-doesnt-work-on-android</link><guid isPermaLink="false">https://engineering.mindlinksoft.comwhy-draftjs-doesnt-work-on-android</guid><pubDate>Sun, 22 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://draftjs.org/&quot;&gt;DraftJS&lt;/a&gt; is a popular open source rich text editing library for React maintained by Facebook. It allows developers to decorate input text as the user types, and provides a way to embed metadata into the decorated text (e.g. a URL.) Also supports commands, keyboard shortcuts …&lt;/p&gt;
&lt;p&gt;All of these rich development features come with a caveat however: mobile browsers are not officially supported. This means that if you’re developing your mobile applications as wrapped web applications via &lt;a href=&quot;https://cordova.apache.org/&quot;&gt;Cordova&lt;/a&gt; (or &lt;a href=&quot;https://phonegap.com/&quot;&gt;Phonegap&lt;/a&gt;, or &lt;a href=&quot;https://ionicframework.com/&quot;&gt;Ionic&lt;/a&gt;) then you’re probably out of luck.&lt;/p&gt;
&lt;p&gt;This post is about &lt;em&gt;why&lt;/em&gt; the way Draft works is in principle incompatible with the Google virtual keyboard which is the default on certain Android devices. Supporting multiple mobile operating systems with the same code-base is one of the main reasons why to use Cordova (or similar) in the first place, so you are likely to want to use the same rich text editing library across them all&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;h2&gt;An eventful experience&lt;/h2&gt;
&lt;p&gt;The core React execution model involves deciding what the state of the DOM is in memory first, then pushing the new state down onto the DOM. As a React component, the &lt;a href=&quot;https://github.com/facebook/draft-js/blob/master/src/component/base/DraftEditor.react.js&quot;&gt;DraftEditor&lt;/a&gt; follows the same model.&lt;/p&gt;
&lt;p&gt;DraftJS essentially works by creating a &lt;code class=&quot;language-text&quot;&gt;contenteditable&lt;/code&gt; div and &lt;a href=&quot;https://github.com/facebook/draft-js/blob/05b2b4c83c39163697dccf7a3fa28fe04eb8e008/src/component/base/DraftEditor.react.js#L387&quot;&gt;attaching multiple input-handling events&lt;/a&gt; to it. Leaving all of the more advanced stuff aside (drag events, keyboard shortcuts, input metadata), browsers will normally fire events describing the plain text user input from the editable div. DraftJS will handle these events and create its own virtual version of the text contents and eventually push an update down into the editable div, replacing the DOM text node contents that the browser initially rendered on user input with its rich styled markup and embedded metadata.&lt;/p&gt;
&lt;p&gt;Because of the amount of detail Draft looks after, it does not represent user input (even when it’s all plain text) as a plain DOM text node, but will create separate blocks (strictly speaking divs) to represent different lines. Additionally, any “styled” text is treated as its own block&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;This means Draft relies on the information about the typed text forwarded by the browser through events in order to construct its internal state.&lt;/p&gt;
&lt;h2&gt;Enter GBoard&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://play.google.com/store/apps/details?id=com.google.android.inputmethod.latin&quot;&gt;GBoard&lt;/a&gt; is the default virtual keyboard on first-party Android models (Pixel, Nexus etc.) It supports various fancy features such as gif, emojis, multiple languages etc. It is also available on virtually every Android device (although the default on Samsung devices is probably going to be Samsung-made) and even iOS.&lt;/p&gt;
&lt;p&gt;There are well known issues due to how this keyboard communicates with mobile Chrome: the keyboard does not trigger detailed text input information via browser events (see &lt;a href=&quot;https://github.com/facebook/draft-js/issues/1077&quot;&gt;these&lt;/a&gt; &lt;a href=&quot;https://github.com/ianstormtaylor/slate/issues/725&quot;&gt;discussions&lt;/a&gt;), and there’s multiple issues stemming from text suggestions and auto-complete. &lt;strong&gt;Basically, all of the stuff DraftJS relies on is simply not there&lt;/strong&gt;. This means Draft has to “guess” what the state of the content editable div is at every turn based on the limited information that is forwarded via events.&lt;/p&gt;
&lt;p&gt;What’s worse, this information is sometimes inconsistent with the state of the text node rendered in the DOM: it is possible for the internal state of Draft to be inconsistent with what is shown in the DOM, so if you read the Draft state when extracting input information you may be reading something different from what the user is seeing on the screen. For example: entering newlines does not produce different block level elements in the editor (which, as mentioned, is how Draft represents newlines) but sometimes results in a single block with newline character: ”&lt;code class=&quot;language-text&quot;&gt;&amp;lt;div&amp;gt;hello\nthere&amp;lt;/div&amp;gt;&lt;/code&gt;”. Because of this, both the content state and the selection state become detached from the DOM when newlines are entered, resulting in a complete mess upon backspace (note that some of these issues are also present with the Samsung keyboard on some devices.)&lt;/p&gt;
&lt;h2&gt;Not-so-easy solution&lt;/h2&gt;
&lt;p&gt;These issues with GBoard are long standing and developers outside of DraftJS users have brought them up with the &lt;a href=&quot;https://bugs.chromium.org/p/chromium/issues/detail?id=118639#c260&quot;&gt;Chromium project&lt;/a&gt;. There’s no solution in sight.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The core of the issue is that the way the virtual keyboard interacts with the browser changes contents of the DOM text node inside the content editable block but does not forward edit events as accurately as most other input methods do. This means DraftJS is in principle incompatible with standard Android virtual keyboards as input methods because it relies on these events to update its virtual state.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;DraftJS would need to operate in a completely different “mode” on Android with GBoard: instead of relying on events, passively read the state of the &lt;code class=&quot;language-text&quot;&gt;contenteditable&lt;/code&gt; element and update the internal state accordingly. A host of issues awaits down this path: what event(s) would we wait for before reading the state? Is there some input gesture that would trigger no events? Detecting the running browser and OS is possible, but how do we detect GBoard? Should we maintain two separate modes of operation for Draft, one event-based, another passive, or stick to the passive model indefinitely? Are there any performance consequences? Would the user experience be acceptable or would the timing of the styling effects create awkward delay effects?&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;DraftJS maintainers promise to eventually address the mobile issues, but this isn’t a priority at the moment, in fact it has not been a priority for &lt;a href=&quot;https://github.com/facebook/draft-js/issues/102&quot;&gt;around a couple of years now&lt;/a&gt;. Ultimately, DraftJS is not production-ready for mobile Android&lt;sup id=&quot;fnref-3&quot;&gt;&lt;a href=&quot;#fn-3&quot; class=&quot;footnote-ref&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;. If you want to re-use as much of your code as possible throughout your web and mobile clients, DraftJS simply isn’t the solution you need right now. The other alternative is to reject Draft as a way to decorate your mobile input, or investigate alternatives. What is the point of having a rich text decorated input when basic plain text input is unacceptably broken?&lt;/p&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;DraftJS contributors. &lt;a href=&quot;https://draftjs.org/docs/advanced-topics-issues-and-pitfalls.html#content&quot;&gt;&lt;em&gt;DraftJS docs&lt;/em&gt;&lt;/a&gt;. 2018. (and generally Android specific issues on &lt;a href=&quot;https://github.com/facebook/draft-js/issues?q=is%3Aissue+is%3Aopen+android&quot;&gt;the DraftJS repository&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;ReactJS contributors. &lt;a href=&quot;https://reactjs.org/docs/hello-world.html&quot;&gt;&lt;em&gt;ReactJS docs&lt;/em&gt;&lt;/a&gt;. 2018.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;footnotes&quot;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;Originally posted &lt;a href=&quot;https://niccoloterreri.com/why-draftjs-does-not-work-on-android&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;li id=&quot;fn-2&quot;&gt;
&lt;p&gt;For that matter, there is &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Editable_content#Differences_in_markup_generation&quot;&gt;no standard&lt;/a&gt; on how browsers represent content of a &lt;code class=&quot;language-text&quot;&gt;contenteditable&lt;/code&gt; block.&lt;/p&gt;
&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;li id=&quot;fn-3&quot;&gt;
&lt;p&gt;To be clear, DraftJS maintainers do not “owe” anyone mobile Android support. This is only a word of caution to developers thinking of using Draft in their Android mobile projects.&lt;/p&gt;
&lt;a href=&quot;#fnref-3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Publishing to GitHub Pages from TFS]]></title><description><![CDATA[Recently we decided it was time to publish our own blog to showcase some of what our talented engineers do and find interesting. To do this…]]></description><link>https://engineering.mindlinksoft.compublishing-to-github-pages-from-tfs</link><guid isPermaLink="false">https://engineering.mindlinksoft.compublishing-to-github-pages-from-tfs</guid><pubDate>Fri, 13 Apr 2018 10:09:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently we decided it was time to publish our own blog to showcase some of what our talented engineers do and find interesting. To do this with the existing tools and as cheaply and quickly as possible we needed to link Team Foundation Server (TFS) to GitHub Pages.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;To deploy from TFS to GitHub pages:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Install the &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; npm module &lt;/li&gt;
&lt;li&gt;Define an npm script to run gh-pages e.g. &lt;code class=&quot;language-text&quot;&gt;“deploy”: “gh-pages -d public”&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Use TFS secure variables to inject a GitHub personal token into &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; call &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Combined this means defining a build step of the form&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;npm run deploy — -r https://$(GH_TOKEN)@github.com/user/repository.git&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;The &lt;code class=&quot;language-text&quot;&gt;—&lt;/code&gt; (that’s a double &lt;code class=&quot;language-text&quot;&gt;-&lt;/code&gt;) tells npm that it should forward what follows as additional script arguments &lt;/li&gt;
&lt;li&gt;The &lt;code class=&quot;language-text&quot;&gt;-r&lt;/code&gt; is the &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; argument for defining an alternative repository &lt;/li&gt;
&lt;li&gt;The &lt;code class=&quot;language-text&quot;&gt;$(GH_TOKEN)&lt;/code&gt; will be replaced by TFS with the value of the variable called &lt;code class=&quot;language-text&quot;&gt;GH_TOKEN&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Onward to a continuously deployed blog&lt;/h2&gt;
&lt;p&gt;Here at MindLink we use Microsoft Team Foundation Server to host our source in a git repository, manage the build and release process and track our iterations. It’s all nice and integrated!&lt;/p&gt;
&lt;p&gt;We wanted to keep ownership of the blogging platform as seems to be the trend, as opposed to using a service like &lt;a href=&quot;https://www.medium.com&quot;&gt;medium&lt;/a&gt;. The main reason for this is that by having control we also gain the ability to change where we publish and how we publish in future.&lt;/p&gt;
&lt;p&gt;GitHub pages struck us as the perfect platform for a low cost (&lt;em&gt;free&lt;/em&gt;) way to publish a blog and is widely used for such a purpose. It also has a simple way to publish a site - simply push a static site to a specific repository (or gh-pages branch in a project repository). You can read more about GitHub pages &lt;a href=&quot;https://pages.github.com/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;What we wanted was a simple way to write a blog post and automatically publish it using the tools our engineers use every day.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This will give it a low barrier to entry and encourage all the development team to contribute!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As TFS was our existing git repository host and build system it made sense to leverage that for the blog source and release mechanism. Getting TFS to publish a built static site to GitHub is not so straight forward.&lt;/p&gt;
&lt;p&gt;With a static site generator (&lt;a href=&quot;https://www.gatsbyjs.org/&quot;&gt;gatsby&lt;/a&gt; in this case) it’s easy to take a source tree and build a static site. That’s step 1.&lt;/p&gt;
&lt;p&gt;To take that static site and publish it to GitHub when you’re not already in a GitHub repository is less straight-forward, but still perfectly doable!&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Use the &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; npm module to publish &lt;/li&gt;
&lt;li&gt;Use an npm script to define the standard &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; script &lt;/li&gt;
&lt;li&gt;Get TFS build to run the npm script and inject the GitHub credentials and target repository &lt;/li&gt;
&lt;li&gt;Setup the build triggers to either run on every commit, schedule it or do something else &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I’d probably also suggest splitting the build and release phases if you’re worried about publishing potentially broken sites. Since TFS has a fairly powerful build and release mechanism you can get a process that works for you!&lt;/p&gt;
&lt;h2&gt;The details&lt;/h2&gt;
&lt;p&gt;I’m going to assume the following:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;You already have a script to build the static site (maybe an npm script or gulp or grunt process) &lt;/li&gt;
&lt;li&gt;The static site is built to &lt;code class=&quot;language-text&quot;&gt;/public&lt;/code&gt; in the root directory &lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Setup gh-pages npm script&lt;/h3&gt;
&lt;p&gt;The first step is to install the node modules we will need (I’m using yarn here but it will work just as well with npm install): &lt;code class=&quot;language-text&quot;&gt;yarn add gh-pages&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;With that installed we’ll now specify an npm script to publish the built static site (you could just as easily do this with a task runner like gulp or grunt instead, the trick is in injecting the GitHub key):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ...&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        ...&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gh-pages -d public&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;This tells &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; to run using only the “public” folder. With only this configuration it will add a branch called gh-pages to the current repository.&lt;/p&gt;
&lt;h3&gt;Get TFS Build to run the script&lt;/h3&gt;
&lt;p&gt;For the second step we need to tell TFS build to run this script and target a GitHub repository instead!&lt;/p&gt;
&lt;p&gt;Get yourself a personal access token from GitHub by going to &lt;a href=&quot;https://github.com/settings/tokens&quot;&gt;github token settings for your account&lt;/a&gt; and creating a new access token. Make sure you give it permission to read and write to public repositories. Copy that token and don’t lose it!&lt;/p&gt;
&lt;p&gt;Now go to your TFS build configuration and select the variables tab. Add the token as a secure variable with any name you like - here we use &lt;code class=&quot;language-text&quot;&gt;GH_TOKEN&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-eeb2a.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 30.13270882123341%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB34FB/8QAFhAAAwAAAAAAAAAAAAAAAAAAABAR/9oACAEBAAEFAiL/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAEDH/2gAIAQEABj8CKv/EABgQAQEAAwAAAAAAAAAAAAAAABEBABBh/9oACAEBAAE/IQyqqnNf/9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAETFBYZGh/9oACAEBAAE/EAYX3GEGNKp8ic1P/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;TFS Variables&quot;
        title=&quot;&quot;
        src=&quot;/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-f8fb9.jpg&quot;
        srcset=&quot;/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-e8976.jpg 148w,
/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-63df2.jpg 295w,
/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-f8fb9.jpg 590w,
/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-85e3d.jpg 885w,
/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-d1924.jpg 1180w,
/static/tfs-variables-576181a66ba553dcf1f9105718fcbac9-eeb2a.jpg 1281w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Next add a new build step to run our deploy script as below:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/tfs-build-step-c2afb440c28667ee9f1dad68b0d9466c-d6369.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 46.334310850439884%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAQAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3mQmP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABUQAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAE/IRpf/9oADAMBAAIAAwAAABCAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAAIDAAAAAAAAAAAAAAAAAAAQETFB/9oACAEBAAE/EMCVR//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;TFS Build Step&quot;
        title=&quot;&quot;
        src=&quot;/static/tfs-build-step-c2afb440c28667ee9f1dad68b0d9466c-f8fb9.jpg&quot;
        srcset=&quot;/static/tfs-build-step-c2afb440c28667ee9f1dad68b0d9466c-e8976.jpg 148w,
/static/tfs-build-step-c2afb440c28667ee9f1dad68b0d9466c-63df2.jpg 295w,
/static/tfs-build-step-c2afb440c28667ee9f1dad68b0d9466c-f8fb9.jpg 590w,
/static/tfs-build-step-c2afb440c28667ee9f1dad68b0d9466c-85e3d.jpg 885w,
/static/tfs-build-step-c2afb440c28667ee9f1dad68b0d9466c-d6369.jpg 1023w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Type: npm
Run: custom
Arguments: deploy — -b master -r https://$(GH_TOKEN)@github.com/MindLink/MindLink.github.io.git&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;That’s it! TFS build will run the npm script “deploy” and pass additional arguments:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;-b master&lt;/code&gt; =&gt; publish to the master branch of the repository&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;-r https://$(GH_TOKEN)@&amp;lt;repository&amp;gt;&lt;/code&gt; =&gt; publish to a repository using the personal token (which allows you to publish without a user/pass) &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now whenever you trigger the build it will publish a new version of your static site to GitHub Pages.&lt;/p&gt;
&lt;h3&gt;Wrap up&lt;/h3&gt;
&lt;p&gt;This is the exactly how we have started doing it. Right now our team has total freedom to push updates to the blog with continuous deployment, in future that may change to a more managed release process, but our aim is to get our content out with as few steps as possible!&lt;/p&gt;
&lt;p&gt;If you’re interested the full process for somebody to post an article to our blog is:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Checkout the blog source &lt;/li&gt;
&lt;li&gt;Add an author yaml entry if they’ve not already got one &lt;/li&gt;
&lt;li&gt;Add a new post folder with a unique name &lt;/li&gt;
&lt;li&gt;Add a markdown article with front matter (author, title, date and tags) &lt;/li&gt;
&lt;li&gt;Run it locally first if you like &lt;/li&gt;
&lt;li&gt;Commit and push &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;We could distil this further, but we shall see how we get on! A couple of ideas are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;don’t require a separate folder, so you just create the markdown article and push &lt;/li&gt;
&lt;li&gt;Support drafts so you can push without publishing, but still view in develop &lt;/li&gt;
&lt;/ul&gt;</content:encoded></item></channel></rss>